#PBS -N test-planner-50
#PBS -j oe                   # Join error and output files for convinience
#PBS -l walltime=60:00:00    # Keep walltime big enough to finish the job
#PBS -l nodes=1:ppn=12:gpus=1 # nodes requested: Processor per node: gpus requested
#PBS -S /bin/bash            # Shell to use
#PBS -m abe                  # Mail to <user>@umich.edu on abort, begin and end
#PBS -M iljae@umich.edu      # Email id to alert
#PBS -V                      # Pass current environment variables to the script

cd /z/home/iljae/cognitive-mapping-agent
source /z/home/iljae/cognitive-mapping-agent/venv/bin/activate
python run_train_cmap.py \
	--maps=$(cat 1000_maps.txt) \
	--eval \
	--eval_maps=$(cat 100_maps_testing.txt) \
	--logdir=/z/home/iljae/cognitive-mapping-agent/output/planner/50 \
	--apple_prob=0.0 \
	--learning_rate=0.0001 \
	--supervision_rate=1.0 \
	--decay=0.9995 \
	--grad_clip=5 \
	--learn_planner=True \
	--random_goal=True \
	--random_spawn=True \
	--biased_fuser=True \
	--biased_vin=False \
	--vin_size=28 \
	--vin_iterations=32 \
	--vin_rewards=1 \
	--vin_values=3 \
	--vin_actions=8 \
	--fuser_depth=10 \
	--fuser_iterations=1 \
	--flatten_action=True \
	--estimate_size=128 \
	--estimate_scale=3 \
	--batch_norm_goal=True \
	--planner_reg=0.001 \
	--multiproc=True \
	--batch_size=12 \
	--memory_size=1000 \
	--worker_size=9 \
	--optimizer=AdamOptimizer
